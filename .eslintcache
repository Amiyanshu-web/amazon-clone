[{"D:\\amazon-clone\\src\\index.js":"1","D:\\amazon-clone\\src\\App.js":"2","D:\\amazon-clone\\src\\reportWebVitals.js":"3","D:\\amazon-clone\\src\\Header.js":"4","D:\\amazon-clone\\src\\Home.js":"5","D:\\amazon-clone\\src\\Product.js":"6","D:\\amazon-clone\\src\\Checkout.js":"7","D:\\amazon-clone\\src\\Subtotal.js":"8","D:\\amazon-clone\\src\\StateProvider.js":"9","D:\\amazon-clone\\src\\reducer.js":"10","D:\\amazon-clone\\src\\CheckoutProduct.js":"11","D:\\amazon-clone\\src\\Login.js":"12","D:\\amazon-clone\\src\\firebase.js":"13","D:\\amazon-clone\\src\\bgslide.js":"14","D:\\amazon-clone\\src\\footer.js":"15","D:\\amazon-clone\\src\\Payment.js":"16","D:\\amazon-clone\\src\\Footer.js":"17","D:\\amazon-clone\\src\\axios.js":"18","D:\\amazon-clone\\src\\Orders.js":"19","D:\\amazon-clone\\src\\Order.js":"20"},{"size":688,"mtime":1612602412108,"results":"21","hashOfConfig":"22"},{"size":1883,"mtime":1612944772969,"results":"23","hashOfConfig":"22"},{"size":364,"mtime":1612602429391,"results":"24","hashOfConfig":"22"},{"size":2039,"mtime":1612940943365,"results":"25","hashOfConfig":"22"},{"size":8269,"mtime":1612943957096,"results":"26","hashOfConfig":"22"},{"size":1300,"mtime":1612937998422,"results":"27","hashOfConfig":"22"},{"size":1170,"mtime":1612617691575,"results":"28","hashOfConfig":"22"},{"size":1138,"mtime":1612630528459,"results":"29","hashOfConfig":"22"},{"size":373,"mtime":1612602432298,"results":"30","hashOfConfig":"22"},{"size":1204,"mtime":1612854895056,"results":"31","hashOfConfig":"22"},{"size":1316,"mtime":1612770539039,"results":"32","hashOfConfig":"22"},{"size":2085,"mtime":1612602417898,"results":"33","hashOfConfig":"22"},{"size":593,"mtime":1612942433812,"results":"34","hashOfConfig":"22"},{"size":1794,"mtime":1612602377187,"results":"35","hashOfConfig":"22"},{"size":2136,"mtime":1612716076440,"results":"36","hashOfConfig":"22"},{"size":9016,"mtime":1612945092503,"results":"37","hashOfConfig":"22"},{"size":1365,"mtime":1612679207366,"results":"38","hashOfConfig":"22"},{"size":159,"mtime":1612854114829,"results":"39","hashOfConfig":"22"},{"size":996,"mtime":1612942263616,"results":"40","hashOfConfig":"22"},{"size":1048,"mtime":1612942165312,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"cuwoxw",{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"44"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"44"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"44"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"44"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"44"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"87"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"44"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"D:\\amazon-clone\\src\\index.js",[],["93","94"],"D:\\amazon-clone\\src\\App.js",["95","96"],"import React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport Header from \"./Header\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport Footer from \"./footer\";\nimport Checkout from \"./Checkout\";\nimport Login from \"./Login\";\nimport { auth } from \"./firebase\";\nimport { useStateValue } from \"./StateProvider\";\nimport Bgslide from \"./bgslide\";\nimport Payment from \"./Payment\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport Orders from \"./Orders\";\n\nconst promise = loadStripe(\n  \"pk_test_51IIBX1ACAFIHSl3V2Wtin3CJ9QAwc7wEwyJdKMD4mchwXEsyzVdnOsibbQWGitzx1S931trmNAoARTJqRofBbnje00dXzx3aEn\"\n);\n\nfunction App() {\n  const [{}, dispatch] = useStateValue();\n  useEffect(() => {\n    auth.onAuthStateChanged((authUser) => {\n      console.log(\"The User is >>>\", authUser);\n\n      if (authUser) {\n        dispatch({\n          type: \"SET_USER\",\n          user: authUser,\n        });\n      } else {\n        dispatch({\n          type: \"SET_USER\",\n          user: null,\n        });\n      }\n    });\n  }, []);\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/orders\">\n            <Header />\n            <Orders />\n          </Route>\n          <Route path=\"/login\">\n            <Login />\n          </Route>\n          <Route path=\"/checkout\">\n            <Header />\n\n            <Checkout />\n            <Footer />\n          </Route>\n          <Route path=\"/payment\">\n            <Header />\n            <Elements stripe={promise}>\n              <Payment />\n            </Elements>\n            <Footer />\n          </Route>\n          <Route path=\"/\">\n            <Header />\n            <Bgslide />\n            <Home />\n            <Footer />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","D:\\amazon-clone\\src\\reportWebVitals.js",[],"D:\\amazon-clone\\src\\Header.js",["97","98"],"import React from \"react\";\r\nimport \"./header.css\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport ShoppingBasketIcon from \"@material-ui/icons/ShoppingBasket\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport { auth } from \"./firebase\";\r\nfunction Header() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n\r\n  const handleAuthentication = () => {\r\n    if (user) {\r\n      auth.signOut();\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"header\">\r\n      <Link to=\"/\">\r\n        <img\r\n          className=\"header__logo\"\r\n          src=\"http://pngimg.com/uploads/amazon/amazon_PNG11.png\"\r\n        />\r\n      </Link>\r\n      <div className=\"header__search\">\r\n        <input className=\"header__searchInput\" type=\"text\" />\r\n        <SearchIcon className=\"header__searchIcon\" />\r\n\r\n        {/* Logo */}\r\n      </div>\r\n      <div className=\"header__nav\">\r\n        <Link to={!user && \"/login\"}>\r\n          <div className=\"header__option\" onClick={handleAuthentication}>\r\n            <span className=\"header__lineOne\">\r\n              Hello {user ? user.email : \"Guest\"}\r\n            </span>\r\n            <span className=\"header__lineTwo\">\r\n              {user ? \"Sign out\" : \"Sign In\"}\r\n            </span>\r\n          </div>\r\n        </Link>\r\n        <Link to=\"/orders\">\r\n          <div className=\"header__option\">\r\n            <span className=\"header__lineOne\">Returns</span>\r\n            <span className=\"header__lineTwo\"> & Orders</span>\r\n          </div>\r\n        </Link>\r\n        <div className=\"header__option\">\r\n          <span className=\"header__lineOne\">Your</span>\r\n          <span className=\"header__lineTwo\">Prime</span>\r\n        </div>\r\n        <Link to=\"/checkout\">\r\n          <div className=\"header__optionBasket\">\r\n            <ShoppingBasketIcon />\r\n            <span className=\"header__lineTwo headerBasketCount\">\r\n              {basket?.length}\r\n            </span>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","D:\\amazon-clone\\src\\Home.js",[],"D:\\amazon-clone\\src\\Product.js",["99","100","101"],"import React from \"react\";\r\nimport \"./product.css\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport FlipMove from \"react-flip-move\";\r\n\r\nfunction Product({ id, title, image, price, rating }) {\r\n  const [{ basket }, dispatch] = useStateValue();\r\n  const addToBasket = () => {\r\n    dispatch({\r\n      type: \"ADD_TO_BASKET\",\r\n      item: {\r\n        id: Math.random(),\r\n        title: title,\r\n        image: image,\r\n        price: price,\r\n        rating: rating,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <img src={image} />\r\n      <div className=\"product__info\">\r\n        <p>{title}</p>\r\n        <p className=\"product__price\">\r\n          <CurrencyFormat\r\n            rendertext={(value) => <strong>{value}</strong>}\r\n            value={price}\r\n            displayType={\"text\"}\r\n            thousandSeparator={true}\r\n            thousandSpacing={\"2s\"}\r\n            prefix={\"‚Çπ\"}\r\n          />\r\n        </p>\r\n        <div className=\"product__rating\">\r\n          {Array(rating)\r\n            .fill()\r\n            .map((_, i) => (\r\n              <p>‚≠ê</p>\r\n            ))}\r\n        </div>\r\n      </div>\r\n      <button onClick={addToBasket}>Add to Cart</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Product;\r\n","D:\\amazon-clone\\src\\Checkout.js",["102","103","104"],"import React from \"react\";\r\nimport \"./checkout.css\";\r\nimport CheckoutProduct from \"./CheckoutProduct\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport Subtotal from \"./Subtotal\";\r\nimport FlipMove from \"react-flip-move\";\r\n\r\nfunction Checkout() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n\r\n  return (\r\n    <div className=\"checkout\">\r\n      <div className=\"checkout__left\">\r\n        <img\r\n          className=\"checkout__ad\"\r\n          src=\"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg\"\r\n        />\r\n        <div>\r\n          <h3> Hello, {user.email}</h3>\r\n          <h2 className=\"checkout__title\">Your Shopping Basket</h2>\r\n          {basket.map((item, id) => {\r\n            return (\r\n              <CheckoutProduct\r\n                id={item.id}\r\n                title={item.title}\r\n                image={item.image}\r\n                price={item.price}\r\n                rating={item.rating}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n      <div className=\"checkout__right\">\r\n        <Subtotal />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Checkout;\r\n","D:\\amazon-clone\\src\\Subtotal.js",["105"],"import React from \"react\";\r\nimport \"./subtotal.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport { getBasketTotal } from \"./reducer\";\r\n\r\nfunction Subtotal() {\r\n  const history = useHistory();\r\n  const [{ basket }, dispatch] = useStateValue();\r\n  console.log(basket);\r\n  return (\r\n    <div className=\"subtotal\">\r\n      <CurrencyFormat\r\n        renderText={(value) => (\r\n          <>\r\n            <p>\r\n              Subtotal({basket?.length} items): <strong>{value}</strong>\r\n            </p>\r\n            <small className=\"subtotal__gift\">\r\n              <input type=\"checkbox\" />\r\n              This order contains a gift.\r\n            </small>\r\n          </>\r\n        )}\r\n        decimalScale={2}\r\n        value={getBasketTotal(basket)}\r\n        thousandSeparator={true}\r\n        thousandSpacing={\"2s\"}\r\n        displayType={\"text\"}\r\n        prefix={\"‚Çπ\"}\r\n      />\r\n      <button onClick={(e) => history.push(\"./payment\")}>\r\n        Proceed to checkout\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Subtotal;\r\n","D:\\amazon-clone\\src\\StateProvider.js",[],"D:\\amazon-clone\\src\\reducer.js",[],"D:\\amazon-clone\\src\\CheckoutProduct.js",["106","107","108"],"import React from \"react\";\r\nimport \"./CheckoutProduct.css\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport FlipMove from \"react-flip-move\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\n\r\nfunction CheckoutProduct({ id, image, price, title, rating }) {\r\n  const [{ basket }, dispatch] = useStateValue();\r\n\r\n  const removeFromBasket = () => {\r\n    dispatch({\r\n      type: \"REMOVE_FROM_BASKET\",\r\n      id: id,\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"checkoutProduct\">\r\n      <img className=\"checkoutProduct__image\" src={image} />\r\n\r\n      <div className=\"checkoutProduct__info\">\r\n        <p className=\"checkoutProduct__title\">{title}</p>\r\n        <p className=\"checkoutProduct__price\">\r\n          <CurrencyFormat\r\n            rendertext={(value) => <strong>{value}</strong>}\r\n            value={price}\r\n            displayType={\"text\"}\r\n            thousandSeparator={true}\r\n            thousandSpacing={\"2s\"}\r\n            prefix={\"‚Çπ\"}\r\n          />\r\n        </p>\r\n        <div className=\"checkoutProduct__rating\">\r\n          {Array(rating)\r\n            .fill()\r\n            .map(() => (\r\n              <p>‚≠ê</p>\r\n            ))}\r\n        </div>\r\n\r\n        <button onClick={removeFromBasket}>Remove From Cart</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CheckoutProduct;\r\n","D:\\amazon-clone\\src\\Login.js",["109"],"import React, { useState } from \"react\";\r\nimport \"./login.css\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { auth } from \"./firebase\";\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const signIn = (e) => {\r\n    e.preventDefault();\r\n    //firebase\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then((auth) => {\r\n        history.push(\"/\");\r\n      })\r\n      .catch((error) => alert(error.message));\r\n  };\r\n  const register = (e) => {\r\n    e.preventDefault();\r\n    //firebase\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then((auth) => {\r\n        console.log(auth);\r\n      })\r\n      .catch((error) => alert(error.message));\r\n\r\n    if (auth) {\r\n      history.push(\"/\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <Link to=\"/\">\r\n        <img\r\n          className=\"login__logo\"\r\n          src=\"http://media.corporate-ir.net/media_files/IROL/17/176060/Oct18/Amazon%20logo.PNG\"\r\n        />\r\n      </Link>\r\n      <div className=\"login__container\">\r\n        <h1>Sign-In</h1>\r\n        <form>\r\n          <h5>E-mail </h5>\r\n          <input\r\n            type=\"text\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n\r\n          <h5>Password</h5>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n\r\n          <button\r\n            className=\"login__signInButton\"\r\n            type=\"submit\"\r\n            onClick={signIn}\r\n          >\r\n            Sign In\r\n          </button>\r\n        </form>\r\n        <p>\r\n          By continuing, you agree to Amazon's Clone Conditions of Use and\r\n          Privacy Notice.\r\n        </p>\r\n      </div>\r\n      <div className=\"new new_break\">New to Amazon?</div>\r\n      <button className=\"login__registerButton\" onClick={register}>\r\n        Create New Account\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","D:\\amazon-clone\\src\\firebase.js",[],"D:\\amazon-clone\\src\\bgslide.js",[],"D:\\amazon-clone\\src\\footer.js",[],"D:\\amazon-clone\\src\\Payment.js",["110","111"],"// import React, { useState, useEffect } from \"react\";\r\n// import CheckoutProduct from \"./CheckoutProduct\";\r\n// import { useStateValue } from \"./StateProvider\";\r\n// import { Link, useHistory } from \"react-router-dom\";\r\n// import \"./Payment.css\";\r\n// import { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\r\n// import { getBasketTotal } from \"./reducer\";\r\n// import CurrencyFormat from \"react-currency-format\";\r\n// import axios from \"./axios\";\r\n\r\n// function Payment() {\r\n//   const [{ basket, user }, dispatch] = useStateValue();\r\n//   const stripe = useStripe();\r\n//   const elements = useElements();\r\n//   const history = useHistory();\r\n//   const [succeeded, setSucceeded] = useState(false);\r\n//   const [processing, setProcessing] = useState(\"\");\r\n\r\n//   const [error, setError] = useState(null);\r\n//   const [disabled, setDisabled] = useState(true);\r\n//   const [clientSecret, setClientSecret] = useState(true);\r\n//   useEffect(() => {\r\n//     const getClientSecret = async () => {\r\n//       const response = await axios({\r\n//         method: \"post\",\r\n\r\n//         url: `/payments/create?total=${getBasketTotal(basket) * 100}`,\r\n//       });\r\n//       setClientSecret(response.data.clientSecret);\r\n//     };\r\n//     getClientSecret();\r\n//   }, [basket]);\r\n\r\n//   console.log(\"THE CLIENT SECRET IS>>>\", clientSecret);\r\n//   const handleSubmit = async (event) => {\r\n//     event.preventDefault();\r\n//     setProcessing(true);\r\n//     const payload = await stripe\r\n//       .confirmCardPayment(clientSecret, {\r\n//         payment_method: {\r\n//           card: elements.getElement(CardElement),\r\n//         },\r\n//       })\r\n//       .then(({ paymentIntent }) => {\r\n//         //payment intetn=aymnet confirmation\r\n\r\n//         setSucceeded(true);\r\n//         setError(null);\r\n//         setProcessing(false);\r\n//         dispatch({\r\n//           type: \"EMPTY_BASKET\",\r\n//         });\r\n//         history.replace(\"/orders\");\r\n//       });\r\n//   };\r\n//   const handleChange = (e) => {\r\n//     setDisabled(e.empty);\r\n//     setError(e.error ? e.error.message : \" \");\r\n//   };\r\n//   return (\r\n//     <div className=\"payment\">\r\n//       <div className=\"payment__container\">\r\n//         <h1>\r\n//           Checkout (<Link to=\"/checkout\">{basket?.length} items</Link>)\r\n//         </h1>\r\n//         <div className=\"payment__section\">\r\n//           <div className=\"payment__title\">\r\n//             <h3>Delivery Address</h3>\r\n//           </div>\r\n//           <div className=\"payment__address\">\r\n//             <p>{user?.email}</p>\r\n//             <p>Chandni Chowk</p>\r\n//             <p>New Delhi,India</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"payment__section\">\r\n//           <div className=\"payment__title\">\r\n//             <h3>Review items and Delivery</h3>\r\n//           </div>\r\n//           <div className=\"payment__items\">\r\n//             {basket.map((item) => {\r\n//               return (\r\n//                 <CheckoutProduct\r\n//                   id={item.id}\r\n//                   title={item.title}\r\n//                   image={item.image}\r\n//                   price={item.price}\r\n//                   rating={item.rating}\r\n//                 />\r\n//               );\r\n//             })}\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"payment__section\">\r\n//           <div className=\"payment__title\">\r\n//             <h3>Payment Method</h3>\r\n//           </div>\r\n//           <div className=\"payment__details\">\r\n//             <form onSubmit={handleSubmit}>\r\n//               <CardElement onChange={handleChange} />\r\n\r\n//               <div className=\"payment__priceContainer\">\r\n//\r\n//                 <button disabled={processing || disabled || succeeded}>\r\n//                   <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\r\n//                 </button>\r\n//               </div>\r\n//               {error && <div>{error}</div>}\r\n//             </form>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Payment;\r\nimport React, { useState, useEffect } from \"react\";\r\nimport \"./Payment.css\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport CheckoutProduct from \"./CheckoutProduct\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport CurrencyFormat from \"react-currency-format\";\r\nimport { getBasketTotal } from \"./reducer\";\r\nimport axios from \"./axios\";\r\nimport { db } from \"./firebase\";\r\n\r\nfunction Payment() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n  const history = useHistory();\r\n\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  const [processing, setProcessing] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [clientSecret, setClientSecret] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // generate the special stripe secret which allows us to charge a customer\r\n    const getClientSecret = async () => {\r\n      const response = await axios({\r\n        method: \"post\",\r\n        // Stripe expects the total in a currencies subunits\r\n        url: `/payments/create?total=${getBasketTotal(basket) * 100}`,\r\n      });\r\n      setClientSecret(response.data.clientSecret);\r\n    };\r\n\r\n    getClientSecret();\r\n  }, [basket]);\r\n\r\n  console.log(\"THE SECRET IS >>>\", clientSecret);\r\n  console.log(\"üë±\", user);\r\n\r\n  const handleSubmit = async (event) => {\r\n    // do all the fancy stripe stuff...\r\n    event.preventDefault();\r\n    setProcessing(true);\r\n\r\n    const payload = await stripe\r\n      .confirmCardPayment(clientSecret, {\r\n        payment_method: {\r\n          card: elements.getElement(CardElement),\r\n        },\r\n      })\r\n      .then(({ paymentIntent }) => {\r\n        // paymentIntent = payment confirmation\r\n\r\n        db.collection(\"users\")\r\n          .doc(user?.uid)\r\n          .collection(\"orders\")\r\n          .doc(paymentIntent.id)\r\n          .set({\r\n            basket: basket,\r\n            amount: paymentIntent.amount,\r\n            created: paymentIntent.created,\r\n          });\r\n\r\n        setSucceeded(true);\r\n        setError(null);\r\n        setProcessing(false);\r\n\r\n        // dispatch({\r\n        //   type: \"EMPTY_BASKET\",\r\n        // });\r\n\r\n        history.replace(\"/orders\");\r\n      });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    // Listen for changes in the CardElement\r\n    // and display any errors as the customer types their card details\r\n    setDisabled(event.empty);\r\n    setError(event.error ? event.error.message : \"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment\">\r\n      <div className=\"payment__container\">\r\n        <h1>\r\n          Checkout (<Link to=\"/checkout\">{basket?.length} items</Link>)\r\n        </h1>\r\n\r\n        {/* Payment section - delivery address */}\r\n        <div className=\"payment__section\">\r\n          <div className=\"payment__title\">\r\n            <h3>Delivery Address</h3>\r\n          </div>\r\n          <div className=\"payment__address\">\r\n            <p>{user?.email}</p>\r\n            <p>Chandni Chowk,</p>\r\n            <p>Delhi, INDIA</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment section - Review Items */}\r\n        <div className=\"payment__section\">\r\n          <div className=\"payment__title\">\r\n            <h3>Review items and delivery</h3>\r\n          </div>\r\n          <div className=\"payment__items\">\r\n            {basket.map((item) => (\r\n              <CheckoutProduct\r\n                id={item.id}\r\n                title={item.title}\r\n                image={item.image}\r\n                price={item.price}\r\n                rating={item.rating}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Payment section - Payment method */}\r\n        <div className=\"payment__section\">\r\n          <div className=\"payment__title\">\r\n            <h3>Payment Method</h3>\r\n          </div>\r\n          <div className=\"payment__details\">\r\n            {/* Stripe magic will go */}\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <CardElement onChange={handleChange} />\r\n\r\n              <div className=\"payment__priceContainer\">\r\n                <CurrencyFormat\r\n                  renderText={(value) => <h3>Order Total:{value}</h3>}\r\n                  decimalScale={2}\r\n                  value={getBasketTotal(basket)}\r\n                  thousandSeparator={true}\r\n                  thousandSpacing={\"2s\"}\r\n                  displayType={\"text\"}\r\n                  prefix={\"‚Çπ\"}\r\n                />\r\n                <button disabled={processing || disabled || succeeded}>\r\n                  <span>{processing ? <p>Processing</p> : \"Buy Now\"}</span>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Errors */}\r\n              {error && <div>{error}</div>}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Payment;\r\n","D:\\amazon-clone\\src\\Footer.js",[],"D:\\amazon-clone\\src\\axios.js",[],["112","113"],"D:\\amazon-clone\\src\\Orders.js",["114","115"],"import React, { useState, useEffect } from \"react\";\r\nimport { db } from \"./firebase\";\r\nimport \"./orders.css\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport Order from \"./Order\";\r\n\r\nfunction Orders() {\r\n  const [{ basket, user }, dispatch] = useStateValue();\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      db.collection(\"users\")\r\n        .doc(user?.uid)\r\n        .collection(\"orders\")\r\n        .orderBy(\"created\", \"desc\")\r\n        .onSnapshot((snapshot) =>\r\n          setOrders(\r\n            snapshot.docs.map((doc) => ({\r\n              id: doc.id,\r\n              data: doc.data(),\r\n            }))\r\n          )\r\n        );\r\n    } else {\r\n      setOrders([]);\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className=\"orders\">\r\n      <h1>Your Orders</h1>\r\n\r\n      <div className=\"orders__order\">\r\n        {orders?.map((order) => (\r\n          <Order order={order} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Orders;\r\n","D:\\amazon-clone\\src\\Order.js",[],{"ruleId":"116","replacedBy":"117"},{"ruleId":"118","replacedBy":"119"},{"ruleId":"120","severity":1,"message":"121","line":22,"column":10,"nodeType":"122","messageId":"123","endLine":22,"endColumn":12},{"ruleId":"124","severity":1,"message":"125","line":39,"column":6,"nodeType":"126","endLine":39,"endColumn":8,"suggestions":"127"},{"ruleId":"128","severity":1,"message":"129","line":9,"column":28,"nodeType":"130","messageId":"131","endLine":9,"endColumn":36},{"ruleId":"132","severity":1,"message":"133","line":19,"column":9,"nodeType":"134","endLine":22,"endColumn":11},{"ruleId":"128","severity":1,"message":"135","line":5,"column":8,"nodeType":"130","messageId":"131","endLine":5,"endColumn":16},{"ruleId":"128","severity":1,"message":"136","line":8,"column":12,"nodeType":"130","messageId":"131","endLine":8,"endColumn":18},{"ruleId":"132","severity":1,"message":"133","line":24,"column":7,"nodeType":"134","endLine":24,"endColumn":26},{"ruleId":"128","severity":1,"message":"135","line":6,"column":8,"nodeType":"130","messageId":"131","endLine":6,"endColumn":16},{"ruleId":"128","severity":1,"message":"129","line":9,"column":28,"nodeType":"130","messageId":"131","endLine":9,"endColumn":36},{"ruleId":"132","severity":1,"message":"133","line":14,"column":9,"nodeType":"134","endLine":17,"endColumn":11},{"ruleId":"128","severity":1,"message":"129","line":10,"column":22,"nodeType":"130","messageId":"131","endLine":10,"endColumn":30},{"ruleId":"128","severity":1,"message":"135","line":4,"column":8,"nodeType":"130","messageId":"131","endLine":4,"endColumn":16},{"ruleId":"128","severity":1,"message":"136","line":8,"column":12,"nodeType":"130","messageId":"131","endLine":8,"endColumn":18},{"ruleId":"132","severity":1,"message":"133","line":18,"column":7,"nodeType":"134","endLine":18,"endColumn":61},{"ruleId":"132","severity":1,"message":"133","line":39,"column":9,"nodeType":"134","endLine":42,"endColumn":11},{"ruleId":"128","severity":1,"message":"129","line":130,"column":28,"nodeType":"130","messageId":"131","endLine":130,"endColumn":36},{"ruleId":"128","severity":1,"message":"137","line":164,"column":11,"nodeType":"130","messageId":"131","endLine":164,"endColumn":18},{"ruleId":"116","replacedBy":"138"},{"ruleId":"118","replacedBy":"139"},{"ruleId":"128","severity":1,"message":"136","line":8,"column":12,"nodeType":"130","messageId":"131","endLine":8,"endColumn":18},{"ruleId":"128","severity":1,"message":"129","line":8,"column":28,"nodeType":"130","messageId":"131","endLine":8,"endColumn":36},"no-native-reassign",["140"],"no-negated-in-lhs",["141"],"no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["142"],"no-unused-vars","'dispatch' is assigned a value but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'FlipMove' is defined but never used.","'basket' is assigned a value but never used.","'payload' is assigned a value but never used.",["140"],["141"],"no-global-assign","no-unsafe-negation",{"desc":"143","fix":"144"},"Update the dependencies array to be: [dispatch]",{"range":"145","text":"146"},[1112,1114],"[dispatch]"]